!function(a,b){var c="JSONFormatter";"object"==typeof module&&"object"==typeof module.exports?module.exports=b():"function"==typeof define&&define.amd?define(c,b):("object"==typeof exports?exports:a)[c]=b()}(this,function(){function a(){function b(a){return i.indexOf(a)>=0}function c(a,c){var d='"';return c||!b(a)&&!j.noquote.test(a)||(d=""),d+a+d}function d(a){return j.trailer.test(a)?d(a.substr(-1)):a}function e(a,b){for(var d,e='"',f=[];b.length;)if(d=b.shift(),"\\"!==d[d.length-1]){if(d===a)break;d===e&&(d="\\"+d),f.push(d)}else j.escape.test(b[0])||(d=d.substr(0,d.length-1)),f.push(d),f.push(b.shift());return c(f.join(""),!0)}function f(a){for(var b,f="";a.length;)switch(b=a.shift()){case" ":break;case"}":case"]":f=d(f)+b;break;case'"':case"'":f+=e(b,a);break;default:f+=c(b,":"===a[0])}return f}function g(a){var c,d=[];for(c=0;c<a.length;++c)0===d.length||b(a[c])||b(d[d.length-1])?d.push(a[c]):d[d.length-1]+=a[c];return d}if("undefined"!=typeof a.prototype.__instance||!(this instanceof a))return a.prototype.__instance||new a;a.prototype.__instance=this;var h=this,i="'\":,{}[] ",j={escape:/["\\\/\b\f\n\r\t]/,noquote:/^(?:true|false|null|-?[0-9]+(?:\.[0-9]+)?)$/i,trailer:/[,]+$/};h.prepare=function(a){return f(g(a)).replace(/^.*?([:,]).*$/,function(a,b){var c=":"===b?"{}":"[]";return a[0]!==c[0]?c[0]+a+c[1]:a})},h.parse=function(a){return JSON.parse(h.prepare(a))}}return new a});
