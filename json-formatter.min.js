!function(a,b){"use strict";var c="JSONFormatter";"object"==typeof module&&"object"==typeof module.exports?module.exports=b():"function"==typeof define&&define.amd?define(c,b):("object"==typeof exports?exports:a)[c]=b()}(this,function(){"use strict";function a(){function b(a){return k.indexOf(a)>=0}function c(a,c){var d=l;return c||!b(a)&&!m.noquote.test(a)||(d=""),d+a+d}function d(a){return m.trailer.test(a)?d(a.substr(0,a.length-1)):a}function e(a,b){for(var d,e=[];b.length;)if(d=b.shift(),"\\"!==d[d.length-1]){if(d===a)break;e.push(d)}else m.escape.test(b[0])||(d=d.substr(0,d.length-1)),e.push(d),e.push(b.shift());return c(e.join(""))}function f(a){for(var b="";a.length;)b=g(b,a);return b}function g(a,b){var f=b.shift();switch(f){case" ":break;case"}":case"]":a=d(a)+f;break;case'"':case"'":a+=e(f,b);break;default:a+=c(f,":"===b[0])}return a}function h(a){var c,d=[];for(c=0;c<a.length;++c)0===d.length||b(a[c])||b(d[d.length-1])?d.push(a[c]):d[d.length-1]+=a[c];return d}function i(a,b){var c=":"===b?"{}":"[]";return a[0]!==c[0]?c[0]+d(a)+c[1]:a}if("undefined"!=typeof a.prototype.__instance||!(this instanceof a))return a.prototype.__instance||new a;a.prototype.__instance=this;var j=this,k="'\":,{}[] ",l='"',m={escape:/["\\\/\b\f\n\r\t]/,noquote:/^(?:true|false|null|-?[0-9]+(?:\.[0-9]+)?)$/i,trailer:/[,]+$/};j.prepare=function(a){return f(h(a)).replace(/^.*?([:,]).*$/,i)},j.parse=function(a){return JSON.parse(j.prepare(a))}}return a});