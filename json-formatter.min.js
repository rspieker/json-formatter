function JSONFormatter(){function a(a){return h.indexOf(a)>=0}function b(b,c){var d='"';return c||!a(b)&&!i.noquote.test(b)||(d=""),d+b+d}function c(a){return i.trailer.test(a)?c(a.substr(-1)):a}function d(a,c){for(var d,e='"',f=[];c.length;)if(d=c.shift(),"\\"!==d[d.length-1]){if(d===a)break;d===e&&(d="\\"+d),f.push(d)}else i.escape.test(c[0])||(d=d.substr(0,d.length-1)),f.push(d),f.push(c.shift());return b(f.join(""),!0)}function e(a){for(var e,f="";a.length;)switch(e=a.shift()){case" ":break;case"}":case"]":f=c(f)+e;break;case'"':case"'":f+=d(e,a);break;default:f+=b(e,":"===a[0])}return f}function f(b){var c,d=[];for(c=0;c<b.length;++c)0===d.length||a(b[c])||a(d[d.length-1])?d.push(b[c]):d[d.length-1]+=b[c];return d}if("undefined"!=typeof JSONFormatter.prototype.__instance||!(this instanceof JSONFormatter))return JSONFormatter.prototype.__instance||new JSONFormatter;JSONFormatter.prototype.__instance=this;var g=this,h="'\":,{}[] ",i={escape:/["\\\/\b\f\n\r\t]/,noquote:/^(?:true|false|null|-?[0-9]+(?:\.[0-9]+)?)$/i,trailer:/[,]+$/};g.prepare=function(a){return e(f(a)).replace(/^.*?([:,]).*$/,function(a,b){var c=":"===b?"{}":"[]";return a[0]!==c[0]?c[0]+a+c[1]:a})},g.parse=function(a){return JSON.parse(g.prepare(a))}}